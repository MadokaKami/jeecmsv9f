webpackJsonp([40],{"+9i7":function(n,t,e){"use strict";function s(n){var t=Object(r.a)()+"/api/admin/template/exportTpl";return n.appId="1580387213331704",n.sessionKey=localStorage.getItem("sessionKey"),t+"?"+a.a.stringify(n)}function o(n){e("d9EV")}Object.defineProperty(t,"__esModule",{value:!0});var i=e("PHrY"),l=e("DEjr"),a=e.n(l),r=(e("IcnI"),e("QmSG")),u=e("2RFS"),c=e("s4F+"),p=e("2sCs"),m=e.n(p),b={data:function(){var n=Object(u.a)();return{solutions:[],params:{solution:"",mobile:!0},solution:"",exportLink:"#",mobileState:"PC",upobj:Object(c.a)({appId:"1580387213331704",sessionKey:localStorage.getItem("sessionKey"),nonceStr:n},"Sd6qkHm9o4LaVluYRX5pUFyNuiu2a8oi")}},methods:{getSolutions:function(){var n=this;i.j().then(function(t){n.solutions=t.body,m.a.post(n.$api.siteGet,{id:n.$getSiteId()}).then(function(t){"PC"==n.mobileState?(n.params.solution=t.body.tplSolution,n.solution=t.body.tplSolution,n.params.mobile=""):(n.params.solution=t.body.tplMobileSolution,n.solution=t.body.tplMobileSolution,n.params.mobile=t.body.tplMobileSolution)})})},setSolutions:function(){var n=this;"PC"==this.mobileState?this.params.mobile="":(this.params.mobile=this.params.solution,this.params.solution=""),i.o(this.params).then(function(t){"200"==t.code?(n.$message.success("设置成功"),n.getSolutions()):(n.$message.error("设置失败"),n.getSolutions())})},handleAvatarSuccess:function(n,t){200==n.code?this.successMessage("导入成功"):209==n.code?this.errorMessage("无上传权限"):this.errorMessage("上传失败")}},created:function(){this.params.mobile=this.$route.query.mobile,this.$route.query.mobile?this.mobileState="mobile":this.mobileState="PC",this.getSolutions(),this.exportLink=s({solution:this.solution})},watch:{$route:function(n,t){this.$route.query.mobile?this.mobileState="mobile":this.mobileState="PC",this.getSolutions()},solution:{handler:function(n,t){this.exportLink=s({solution:this.solution})}}}},d=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("div",{staticClass:"cms-list-header clearfix flex"},[e("span",{staticClass:"forum-name",staticStyle:{"font-size":"14px"}},[n._v(n._s(n.$route.name)+"-"+n._s(n.mobileState))])]),n._v(" "),e("el-form",{staticClass:"cms-form",staticStyle:{margin:"0",padding:"0"},attrs:{"label-width":"162px"}},[e("el-form-item",{staticClass:"flex-100",attrs:{label:"默认方案"}},[e("el-col",{attrs:{span:4}},[e("el-select",{model:{value:n.params.solution,callback:function(t){n.$set(n.params,"solution",t)},expression:"params.solution"}},n._l(n.solutions,function(n){return e("el-option",{key:n,attrs:{label:n,value:n}})}))],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:n.setSolutions}},[n._v("设置")])],1)],1),n._v(" "),e("el-form-item",{staticClass:"flex-100",attrs:{label:"导出方案"}},[e("el-col",{attrs:{span:4}},[e("el-select",{model:{value:n.solution,callback:function(t){n.solution=t},expression:"solution"}},n._l(n.solutions,function(n){return e("el-option",{key:n,attrs:{label:n,value:n}})}))],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("a",{staticClass:"el-button el-button--primary",staticStyle:{"margin-left":"15px"},attrs:{href:n.exportLink}},[n._v("导出")])])],1),n._v(" "),e("el-form-item",{staticClass:"flex-100",attrs:{label:"导入"}},[e("el-col",{attrs:{span:6}},[e("el-upload",{staticStyle:{display:"inline-block"},attrs:{action:n.$store.state.sys.importTpl,name:"uploadFile",data:n.upobj,"show-file-list":!1,"on-success":n.handleAvatarSuccess}},[e("el-button",{attrs:{type:"primary"}},[n._v("导入")])],1)],1)],1)],1),n._v(" "),e("div",{staticClass:"margin-md"})],1)},f=[],h={render:d,staticRenderFns:f},S=h,y=e("Z0/y"),v=o,g=y(b,S,!1,v,null,null);t.default=g.exports},"+eE6":function(n,t,e){t=n.exports=e("I71c")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},d9EV:function(n,t,e){var s=e("+eE6");"string"==typeof s&&(s=[[n.i,s,""]]),s.locals&&(n.exports=s.locals);e("FIqI")("16a299e5",s,!0,{})}});
webpackJsonp([43],{C8Tq:function(t,e,a){var n=a("oUHN");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("FIqI")("1b5b79e9",n,!0,{})},YCJl:function(t,e,a){"use strict";function n(t){a("C8Tq")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("5HJ5"),i=a("2sCs"),l=a.n(i),o=a("QmSG"),c={mixins:[s.a],data:function(){return{globalUrl:Object(o.a)(),dialogVisible:!1,interval:"",params:{queryCtgId:""},tips:{SUCCESS:"采集成功!",TITLESTARTNOTFOUND:"采集失败!原因: 标题起始点不匹配",TITLEENDNOTFOUND:"采集失败!原因: 标题结束点不匹配",CONTENTSTARTNOTFOUND:"采集失败!原因: 内容起始点不匹配",CONTENTENDNOTFOUND:"采集失败!原因: 内容结束点不匹配",TITLEEXIST:"采集失败!原因: 标题已存在",VIEWSTARTNOTFOUND:"采集失败!原因: 浏览量起始点不匹配",VIEWENDNOTFOUND:"采集失败!原因: 浏览量结束点不匹配",AUTHORSTARTNOTFOUND:"采集失败!原因: 作者起始点不匹配",AUTHORENDNOTFOUND:"采集失败!原因: 作者结束点不匹配",DESCRISTARTNOTFOUND:"采集失败!原因: 摘要起始点不匹配",DESCRIENDNOTFOUND:"采集失败!原因: 摘要结束点不匹配",ORIGINSTARTNOTFOUND:"采集失败!原因: 来源起始点不匹配",ORIGINENDNOTFOUND:"采集失败!原因: 来源结束点不匹配",RELEASESTARTNOTFOUND:"采集失败!原因: 发布时间起始点不匹配",RELEASEENDNOTFOUND:"采集失败!原因: 发布时间结束点不匹配",VIEWIDSTARTNOTFOUND:"采集失败!原因: 发布时间起始点不匹配",VIEWIDENDNOTFOUND:"采集失败!原因: 发布时间结束点不匹配"},percent:0,collection:{},speedData:[],collectionmanageTypes:[]}},methods:{handleClose:function(t){t()},suspend:function(t){var e=this;l.a.post(this.$api.collectPause,{id:t}).then(function(t){e.loading=!0,"200"==t.code&&(e.loading=!1,e.getTableData(e.params),e.successMessage("操作成功"))}).catch(function(t){e.loading=!1})},stop:function(t){var e=this;l.a.post(this.$api.collectEnd,{id:t}).then(function(t){e.loading=!0,"200"==t.code&&(e.loading=!1,e.getTableData(e.params),e.successMessage("操作成功"))}).catch(function(t){e.loading=!1})},start:function(t,e){var a=this;l.a.post(this.$api.collectStart,{ids:t}).then(function(t){if(a.loading=!0,"200"==t.code){a.loading=!1,a.getTableData(a.params);var e=a.$api.collectSpeedData;l.a.post(e).then(function(t){"200"==t.code&&(t.body.havaAcquisition?(a.dialogVisible=!0,a.interval=setInterval(function(){l.a.post(e).then(function(t){"200"==t.code&&(a.percent=t.body.percent,a.collection=t.body.acquisition,a.speedData=t.body.list)}).catch(function(t){})},1e3)):a.$confirm("当前采集任务无法进行，请检查采集任务信息设置是否正确，请确认!","提示",{confirmButtonText:"确定",type:"warning"}))}).catch(function(t){})}}).catch(function(t){a.loading=!1})},getTableData:function(t){var e=this;this.loading=!0,this.state=!1,l.a.post(this.listUrl,t).then(function(t){if(e.loading=!1,"200"==t.code){e.total=t.totalCount,e.tableData=t.body;for(var a in e.tableData)0==e.tableData[a].status?(e.tableData[a].startDisabled=!1,e.tableData[a].suspendDisabled=!0,e.tableData[a].stopDisabled=!0):1==e.tableData[a].status?(e.tableData[a].startDisabled=!0,e.tableData[a].suspendDisabled=!1,e.tableData[a].stopDisabled=!1):2==e.tableData[a].status&&(e.tableData[a].startDisabled=!1,e.tableData[a].suspendDisabled=!0,e.tableData[a].stopDisabled=!0)}}).catch(function(t){e.loading=!1,e.state=!1})}},created:function(){this.initTableData(this.$api.collectList,this.params)},watch:{dialogVisible:function(t,e){t||clearInterval(this.interval)}}},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"cms-body"},[a("div",{staticClass:"cms-list-header "},[a("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/collection/save",expression:"'/collection/save'"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.routerLink("/collectionmanage/save","save",0)}}},[t._v("添加")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""},on:{"selection-change":t.checkIds}},[a("el-table-column",{attrs:{type:"selection",width:"65",align:"right"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"采集名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"logo",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("span",{staticClass:"stoping"},[t._v("停止")]):t._e(),t._v(" "),1==e.row.status?a("span",{staticClass:"collectioning"},[t._v("采集中"),a("i",{staticClass:"el-icon-loading"})]):t._e(),t._v(" "),2==e.row.status?a("span",{staticClass:"pushing"},[t._v("暂停")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{width:"300",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/collectionmanage/start",expression:"'/collectionmanage/start'"}],staticClass:"btn-collect start",attrs:{title:"开始",disabled:e.row.startDisabled},on:{click:function(a){t.start(e.row.id)}}},[a("i",{staticClass:"iconfont icon-zantingcopy"})]),t._v(" "),a("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/collectionmanage/suspend",expression:"'/collectionmanage/suspend'"}],staticClass:"btn-collect suspend",attrs:{title:"暂停",disabled:e.row.suspendDisabled},on:{click:function(a){t.suspend(e.row.id)}}},[a("i",{staticClass:"iconfont icon-icon-test"})]),t._v(" "),a("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/collectionmanage/stop",expression:"'/collectionmanage/stop'"}],staticClass:"btn-collect  stop",attrs:{title:"停止",disabled:e.row.stopDisabled},on:{click:function(a){t.stop(e.row.id)}}},[a("i",{staticClass:"iconfont icon-iconfonttingzhi"})]),t._v(" "),a("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/collectionmanage/get",expression:"'/collectionmanage/get'"}],staticClass:"btn-collect edit",attrs:{title:"修改"},on:{click:function(a){t.routerLink("/collectionmanage/update","update",e.row.id)}}},[a("i",{staticClass:" iconfont icon-weibiaoti101"})]),t._v(" "),a("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/collectionmanage/delete",expression:"'/collectionmanage/delete'"}],staticClass:"btn-collect delete",attrs:{title:"删除"},on:{click:function(a){t.deleteBatch(t.$api.collectDelete,e.row.id)}}},[a("i",{staticClass:"iconfont  icon-shanchu1"})])],1)}}])})],1),t._v(" "),a("div",{staticClass:"cms-list-footer"},[a("div",{staticClass:"cms-left"},[a("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/collectionmanage/delete",expression:"'/collectionmanage/delete'"}],attrs:{disabled:t.disabled},on:{click:function(e){t.deleteBatch(t.$api.collectDelete,t.ids)}}},[t._v("批量删除")]),t._v(" "),a("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/collectionmanage/start",expression:"'/collectionmanage/start'"}],attrs:{disabled:t.disabled},on:{click:function(e){t.start(t.ids)}}},[t._v("开始采集")])],1)]),t._v(" "),a("el-dialog",{staticClass:"dialog",attrs:{title:"采集进度查看",visible:t.dialogVisible,width:"80%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.percent,status:"success"}})],1)],1),t._v(" "),a("el-row",{staticClass:"speedHead"},[a("el-col",[a("h3",[t._v("采集任务描述："+t._s(t.collection.name)+"正在进行中，预计总数为："+t._s(t.collection.totalNum)+"，正在执行第"+t._s(t.collection.currNum)+"个")])])],1),t._v(" "),a("el-row",{staticClass:"speedHead"},[a("el-col",[a("h3",[t._v("采集信息过程：")])])],1),t._v(" "),a("section",{staticClass:"speed-container"},t._l(t.speedData,function(e,n){return a("el-row",{key:n,staticClass:"speedHead"},[a("el-col",{attrs:{span:1}},[t._v("\n                    第"+t._s(t.speedData[n].seq)+"条\n              ")]),t._v(" "),a("el-col",{attrs:{span:17}},[t._v("\n                  "+t._s(t.speedData[n].contentUrl)+"【"+t._s(t.speedData[n].title)+"】\n              ")]),t._v(" "),a("el-col",{attrs:{span:6}},["success"==t.speedData[n].description?a("span",{staticClass:"collectioning"},[t._v(t._s(t.tips[t.speedData[n].description]))]):a("span",{staticClass:"stoping"},[t._v(t._s(t.tips[t.speedData[n].description]))])])],1)})),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关闭")])],1)],1)],1)},d=[],p={render:r,staticRenderFns:d},b=p,u=a("Z0/y"),v=n,g=u(c,b,!1,v,"data-v-b2d21ab2",null);e.default=g.exports},oUHN:function(t,e,a){e=t.exports=a("l95E")(!1),e.push([t.i,"\n.cms-body table .btn-collect[data-v-b2d21ab2] {\r\n    display: inline-block;\r\n    height: 24px;\r\n    width: 24px;\r\n    min-width: 0px;\r\n    line-height: 24px;\r\n    padding: 0px;\r\n    color: #ffffff;\r\n    margin-left: 2px;\r\n    border: 0px;\r\n    border-radius: 4px;\r\n    -webkit-box-sizing: border-box;\r\n            box-sizing: border-box;\r\n    line-height: 1;\n}\n.cms-body table .btn-collect  .iconfont[data-v-b2d21ab2]{\r\n  font-size: 14px;\r\n  font-weight: 100;\n}\n.cms-body table .edit[data-v-b2d21ab2]{\r\n  background-color: #17d57e;\n}\n.cms-body table .delete[data-v-b2d21ab2]{\r\n  background-color: #ff8b53;\n}\n.cms-body table  .suspend[data-v-b2d21ab2]{\r\n  background-color: #e6a23c;\n}\n.cms-body table  .start[data-v-b2d21ab2]{\r\n  background-color: #67C23A\n}\n.cms-body table  .stop[data-v-b2d21ab2]{\r\n  background-color: #F56C6C\n}\n.collectioning[data-v-b2d21ab2]{\r\n  color: green;\n}\n.stoping[data-v-b2d21ab2]{\r\n  color: red;\n}\n.pushing[data-v-b2d21ab2]{\r\n  color: red;\n}\n.speed-container[data-v-b2d21ab2]{\r\n  max-height: 500px;\r\n  overflow:auto\n}\n.speedHead[data-v-b2d21ab2]{\r\n  margin:10px 0px;\n}\r\n",""])}});
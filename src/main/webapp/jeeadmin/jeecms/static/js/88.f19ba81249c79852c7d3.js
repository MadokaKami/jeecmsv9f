webpackJsonp([88],{DXK4:function(e,a,t){"use strict";function i(e){t("FAwY")}Object.defineProperty(a,"__esModule",{value:!0});var n=t("5HJ5"),s=t("2sCs"),l=t.n(s),o=t("QmSG"),r={mixins:[n.a],data:function(){return{globalUrl:Object(o.a)(),fileTypes:[],names:"",params:{valid:"",root:"/u/cms/www"}}},methods:{uploadChange:function(){this.getTableData(this.params)},backFolder:function(e){e=e.substring(0,e.lastIndexOf("/")),this.params.root=e,this.getTableData(this.params)},queryItem:function(e){this.params.root=e,this.getTableData(this.params)},checkIds:function(e){var a=[];for(var t in e)a.push(e[t].name);this.names=a.join(","),this.disabled=!(e.length>0),this.checkedList=e},deleteInvalid:function(){var e=this;l.a.post(this.$api.fileInvalid,{root:this.params.root}).then(function(a){"200"==a.code&&(e.successMessage("删除成功"),e.getTableData(e.params))}).catch(function(a){e.loading=!1})},enclosure:function(){var e=this;this.loading=!0,l.a.post(this.$api.fileEffective,{root:this.params.root}).then(function(a){"200"==a.code&&(e.loading=!1,e.successMessage("还原成功"),e.getTableData(e.params))}).catch(function(a){e.loading=!1})},deleteBatch:function(e,a,t){var i=this;this.loading=!0,l.a.post(e,{root:t,names:a}).then(function(e){"200"==e.code&&(i.loading=!1,i.successMessage("删除成功"),i.getTableData(i.params))}).catch(function(e){i.loading=!1})}},created:function(){this.initTableData(this.$api.fileList,this.params)}},c=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"cms-body"},[t("section",{staticClass:"cms-list-header"},[t("span",[e._v("当前目录: "+e._s(e.params.root))]),e._v(" \n      "),t("el-radio-group",{model:{value:e.params.valid,callback:function(a){e.$set(e.params,"valid",a)},expression:"params.valid"}},[t("el-radio",{attrs:{label:"1"}},[e._v("有效")]),e._v(" "),t("el-radio",{attrs:{label:"0"}},[e._v("无效")])],1),e._v(" "),t("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/file/list",expression:"'/file/list'"}],attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),e._v(" "),"/u/cms/www"!=e.params.root?t("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/file/list",expression:"'/file/list'"}],attrs:{type:"primary"},on:{click:function(a){e.backFolder(e.params.root)}}},[e._v("返回上一层目录")]):e._e(),e._v(" "),t("cmsMultipleUpload",{staticClass:"uploadDiv",attrs:{btnLabel:"上传",showFileList:!1,uploadPath:e.params.root},on:{change:e.uploadChange}})],1),e._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.checkIds}},[t("el-table-column",{attrs:{type:"selection",width:"65",align:"right"}}),e._v(" "),t("el-table-column",{attrs:{width:"50",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"名称",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isDirectory?t("i",{staticClass:"  iconfont icon-wenjianjiabiheicon"}):e._e(),e._v(" "),a.row.isImage?t("i",{staticClass:"iconfont icon-unie62e"}):a.row.isFile?t("i",{staticClass:"iconfont icon-file"}):e._e(),e._v(" "),a.row.isDirectory?t("a",{on:{click:function(t){e.queryItem(a.row.name)}}},[e._v(e._s(a.row.filename))]):t("span",[e._v(e._s(a.row.filename))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"大小",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.size)+"KB")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"lastModifiedDate",label:"最后修改时间",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"valid",label:"是否有效",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.valid?t("span",[e._v("有效")]):e._e(),e._v(" "),a.row.valid?e._e():t("span",[e._v("无效")])]}}])}),e._v(" --\x3e\n\n      "),t("el-table-column",{attrs:{width:"300",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return t("div",{},[t("cms-button",{directives:[{name:"perms",rawName:"v-perms",value:"/file/delete",expression:"'/file/delete'"}],attrs:{type:"delete"},nativeOn:{click:function(t){e.deleteBatch(e.$api.fileDelete,a.row.name,a.row.path)}}})],1)}}])})],1),e._v(" "),t("div",{staticClass:"cms-list-footer"},[t("div",{staticClass:"cms-left"},[t("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/file/delete",expression:"'/file/delete'"}],attrs:{disabled:e.disabled},on:{click:function(a){e.deleteBatch(e.$api.fileDelete,e.names,e.params.root)}}},[e._v("批量删除")]),e._v(" "),t("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/file/fileInvalid",expression:"'/file/fileInvalid'"}],attrs:{type:""},on:{click:e.deleteInvalid}},[e._v("删除所有失效文件")]),e._v(" "),t("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/file/fileEffective",expression:"'/file/fileEffective'"}],attrs:{type:""},on:{click:e.enclosure}},[e._v("标志原有附件有效")])],1)])],1)},d=[],p={render:c,staticRenderFns:d},u=p,v=t("Z0/y"),f=i,m=v(r,u,!1,f,"data-v-5a964750",null);a.default=m.exports},FAwY:function(e,a,t){var i=t("oduY");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("FIqI")("1de3ef72",i,!0,{})},oduY:function(e,a,t){a=e.exports=t("I71c")(!1),a.push([e.i,"\n.cms-list-header span[data-v-5a964750]{\r\n  text-transform:lowercase ;\n}\n.el-table__row .cell .icon-wenjianjiabiheicon[data-v-5a964750],\r\n.el-table__row .cell .icon-file[data-v-5a964750]{\r\n  color: #ffc822;\n}\n.upload-demo[data-v-5a964750]{\r\n  margin-left: 6px\n}\n.icon-wenjianjiabiheicon[data-v-5a964750],\r\n.icon-shijian[data-v-5a964750],\r\n.icon-file[data-v-5a964750]{\r\n  font-size: 20px;\r\n  position: relative;\r\n  top:3px;\n}\n.icon-unie62e[data-v-5a964750]{\r\n  color: #00aeff;\n}\n.uploadDiv[data-v-5a964750],\r\n.uploading[data-v-5a964750] {\r\n  display: inline-block;\n}\r\n\r\n",""])}});